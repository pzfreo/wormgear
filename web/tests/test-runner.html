<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator UI Tests</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
        }
        .test-suite {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-case {
            padding: 0.75rem;
            margin: 0.5rem 0;
            border-radius: 4px;
            border-left: 4px solid #ccc;
        }
        .test-case.pass {
            background: #e8f5e9;
            border-left-color: #4caf50;
        }
        .test-case.fail {
            background: #ffebee;
            border-left-color: #f44336;
        }
        .test-case.running {
            background: #fff3e0;
            border-left-color: #ff9800;
        }
        .test-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        .test-error {
            color: #d32f2f;
            font-family: monospace;
            font-size: 0.9em;
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: #ffcdd2;
            border-radius: 4px;
        }
        .summary {
            display: flex;
            gap: 2rem;
            padding: 1rem;
            background: #333;
            color: white;
            border-radius: 8px;
            margin-bottom: 2rem;
        }
        .summary-item {
            font-size: 1.1em;
        }
        .summary-item strong {
            font-size: 1.5em;
            display: block;
        }
        .run-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 1rem;
        }
        .run-button:hover {
            background: #5568d3;
        }
        .run-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Generator UI Test Suite</h1>

    <button id="run-tests" class="run-button">Run All Tests</button>

    <div id="summary" class="summary" style="display: none;">
        <div class="summary-item">
            <strong id="total-tests">0</strong>
            Total Tests
        </div>
        <div class="summary-item" style="color: #4caf50;">
            <strong id="passed-tests">0</strong>
            Passed
        </div>
        <div class="summary-item" style="color: #f44336;">
            <strong id="failed-tests">0</strong>
            Failed
        </div>
        <div class="summary-item">
            <strong id="test-duration">0ms</strong>
            Duration
        </div>
    </div>

    <div id="test-results"></div>

    <script type="module">
        import { runAllTests } from './test-suite.js';

        const runButton = document.getElementById('run-tests');
        const resultsDiv = document.getElementById('test-results');
        const summaryDiv = document.getElementById('summary');

        runButton.addEventListener('click', async () => {
            runButton.disabled = true;
            runButton.textContent = 'Running tests...';
            resultsDiv.innerHTML = '';
            summaryDiv.style.display = 'none';

            const startTime = performance.now();
            const results = await runAllTests((suiteName, testName, status, error) => {
                updateTestDisplay(suiteName, testName, status, error);
            });
            const duration = performance.now() - startTime;

            updateSummary(results, duration);
            runButton.disabled = false;
            runButton.textContent = 'Run All Tests';
        });

        function updateTestDisplay(suiteName, testName, status, error) {
            let suiteDiv = document.querySelector(`[data-suite="${suiteName}"]`);
            if (!suiteDiv) {
                suiteDiv = document.createElement('div');
                suiteDiv.className = 'test-suite';
                suiteDiv.dataset.suite = suiteName;
                suiteDiv.innerHTML = `<h2>${suiteName}</h2>`;
                resultsDiv.appendChild(suiteDiv);
            }

            let testDiv = suiteDiv.querySelector(`[data-test="${testName}"]`);
            if (!testDiv) {
                testDiv = document.createElement('div');
                testDiv.className = 'test-case';
                testDiv.dataset.test = testName;
                testDiv.innerHTML = `<div class="test-name">${testName}</div>`;
                suiteDiv.appendChild(testDiv);
            }

            testDiv.className = `test-case ${status}`;
            if (error) {
                testDiv.innerHTML += `<div class="test-error">${error}</div>`;
            }
        }

        function updateSummary(results, duration) {
            summaryDiv.style.display = 'flex';
            document.getElementById('total-tests').textContent = results.total;
            document.getElementById('passed-tests').textContent = results.passed;
            document.getElementById('failed-tests').textContent = results.failed;
            document.getElementById('test-duration').textContent = `${Math.round(duration)}ms`;
        }
    </script>
</body>
</html>
